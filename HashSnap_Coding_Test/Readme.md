# ğŸ§¾ HashSnap Backend Session-Auth-Task

## ğŸ“Œ í”„ë¡œì íŠ¸ ê°œìš”

ë³¸ í”„ë¡œì íŠ¸ëŠ” íšŒì› ê°€ì… ë° ì¸ì¦ ì‹œìŠ¤í…œì„ êµ¬í˜„í•œ REST APIì…ë‹ˆë‹¤.
ì‚¬ìš©ì ë“±ë¡, ë¡œê·¸ì¸, ë¹„ë°€ë²ˆí˜¸ ì¬ì„¤ì • ë“±ì˜ í•µì‹¬ ê¸°ëŠ¥ì„ ì œê³µí•˜ë©°, JSON ê¸°ë°˜ì˜ ë°ì´í„° í†µì‹ ì„ í†µí•´ ì•ˆì „í•˜ê³  íš¨ìœ¨ì ì¸ ì‚¬ìš©ì ê´€ë¦¬ ì‹œìŠ¤í…œì„ êµ¬ì¶•í–ˆìŠµë‹ˆë‹¤.

---

## ğŸš€ ì‹¤í–‰ ë°©ë²• (ì„¤ì¹˜ ë° êµ¬ë™ ê°€ì´ë“œ)

### 1. í™˜ê²½ ì„¤ì •

- Java 17
- Node.js 22
- MySQL 8.0
- Gradle
- Git

### 2. í”„ë¡œì íŠ¸ í´ë¡ 

```bash
git clone https://github.com/JUHYE0925/session-auth-task.git
```

### 3. ë°±ì—”ë“œ ì‹¤í–‰

```bash
cd backend
./gradlew build
java -jar build/libs/HashSnap_Coding_Test.jar
```

### 4. ë°ì´í„°ë² ì´ìŠ¤ ì„¤ì •

- `application.yml` ë˜ëŠ” `.env` íŒŒì¼ì— DB ì ‘ì† ì •ë³´ ì…ë ¥
- ì´ˆê¸° ìŠ¤í‚¤ë§ˆ ë° ë°ì´í„°ëŠ” `init.sql` í˜¹ì€ DB í´ë”ì˜ `hashsnap` íŒŒì¼ ì°¸ê³ 

---

## ğŸ›  ì‚¬ìš© ê¸°ìˆ  ìŠ¤íƒ

### Backend

- Java 17
- Spring Boot
- Spring Data JPA
- Spring Security(Session-based Authentication)
- MySQL
- Gradle
- Thymeleaf

## ğŸ“š API ëª…ì„¸ì„œ

| ë©”ì„œë“œ    | URL                           | ì„¤ëª…                 | ìš”ì²­ ë°ì´í„°                                                                                                                         | ì‘ë‹µ ë°ì´í„°                                                                                                        |
|--------|-------------------------------|--------------------|--------------------------------------------------------------------------------------------------------------------------------|---------------------------------------------------------------------------------------------------------------|
| `GET`  | `/user/signup`                | íšŒì›ê°€ì… í™”ë©´ ìš”ì²­         | -                                                                                                                              | `View:user/signup`                                                                                            |
| `POST` | `/user/signup`                | íšŒì›ê°€ì…               | `{ "userName": "í™ê¸¸ë™", "nickname" : "user01", "userPhone" : "01012345678", "userEmail": "test@email.com", "password": "1234" }` | `200 OK`                                                                                                      |
| `POST` | `/user/check-duplicate`       | ë‹‰ë„¤ì„/ì´ë©”ì¼/ì „í™”ë²ˆí˜¸ ì¤‘ë³µ ì²´í¬ | `{ "nickname": "user01"} ë˜ëŠ” { "userPhone" : 01012345678 } ë˜ëŠ” { "userEmail" : "test@email.com" }`                               | `"isDuplicate" : true/false`                                                                                  |
| `GET`  | `/auth/login`                 | ë¡œê·¸ì¸ í™”ë©´ ìš”ì²­          | -                                                                                                                              | `View:auth/login`                                                                                             |
| `POST` | `/auth/login`                 | ë¡œê·¸ì¸                | `{ "userPhone": "01012345678", "password": "1234" }`                                                                           | `200 OK + SESSIONID`                                                                                          |
| `GET`  | `/auth/logout`                | ë¡œê·¸ì•„ì›ƒ               | -                                                                                                                              | `Redirect:/main`                                                                                              |
| `GET`  | `/user/my-page`               | ë‚˜ì˜ ì •ë³´ ì¡°íšŒ           | -                                                                                                                              | `[ { "userName": "í™ê¸¸ë™", "nickname": "user01", "userPhone": "01012345678", "userEmail" : "test@email.com" } ]` |
| `POST` | `/user/verification-requests` | ì´ë©”ì¼ ì¸ì¦ ì½”ë“œ ë°œì†¡       | `{ "userEmail" : "test@email.com" }`                                                                                           | `200 OK`                                                                                                      |
| `POST` | `/user/verification`          | ì´ë©”ì¼ ì¸ì¦ ë²ˆí˜¸ í™•ì¸       | `{ "userEmail" : "test@email.com", "code" : 166895 }`                                                                          | `{ "result" : true/false }`                                                                                   |
| `POST` | `/user/reset-password`        | ë¹„ë°€ë²ˆí˜¸ ì¬ì„¤ì •           | `{ "newPassword": 5678, "confirmedPassword" : 5678, "userEmail": "test@email.com" }`                                           | `200 OK`                                                                                                      |

    
---

## âœ… êµ¬í˜„ ë²”ìœ„ (ì™„ë£Œëœ ê¸°ëŠ¥ ëª©ë¡)

1. íšŒì› ê°€ì… ê¸°ëŠ¥
   - íšŒì›ê°€ì… ì ˆì°¨ êµ¬í˜„


2. ë¡œê·¸ì¸ ê¸°ëŠ¥
   - ì‹ë³„ ê°€ëŠ¥í•œ ëª¨ë“  ì •ë³´ë¥¼ í†µí•œ ë¡œê·¸ì¸ ì§€ì›
   - ì„¸ì…˜ ê¸°ë°˜ ì¸ì¦ êµ¬í˜„
   

3. ë‚´ ì •ë³´ ì¡°íšŒ ê¸°ëŠ¥
   - ë¡œê·¸ì¸ëœ ì‚¬ìš©ìì˜ í”„ë¡œí•„ ì •ë³´ ì¡°íšŒ
   - ë¯¼ê°í•œ ì •ë³´(ë¹„ë°€ë²ˆí˜¸) ì œì™¸í•˜ê³  ë°˜í™˜
   

4. ë¹„ë°€ë²ˆí˜¸ ì¬ì„¤ì • ê¸°ëŠ¥
   - ë¹„ë¡œê·¸ì¸ ìƒíƒœì—ì„œ ë¹„ë°€ë²ˆí˜¸ ì¬ì„¤ì • ê°€ëŠ¥
   - ì´ë©”ì¼ ì¸ì¦
   - ìƒˆ ë¹„ë°€ë²ˆí˜¸ ì„¤ì • ë° ì—…ë°ì´íŠ¸

---

## ğŸ§ íŠ¹ë³„íˆ ì‹ ê²½ ì“´ ë¶€ë¶„ (ì½”ë“œ ë¦¬ë·° ìš”ì²­ í¬ì¸íŠ¸)

ğŸ” Session ê¸°ë°˜ ì¸ì¦/ì¸ê°€ íë¦„
- HttpSession ê¸°ë°˜ìœ¼ë¡œ ë¡œê·¸ì¸ ì„±ê³µ ì‹œ ì‚¬ìš©ì ì •ë³´ ì €ì¥
- ë¡œê·¸ì¸ ì‹œ usernameParameter, passwordParameter ì»¤ìŠ¤í…€ ì„¤ì • (ì˜ˆ: ì „í™”ë²ˆí˜¸ ê¸°ë°˜ ì¸ì¦)
- CustumLoginSuccessHandlerë¥¼ í†µí•´ ì¸ì¦ í›„ ì²˜ë¦¬ ì œì–´
- AuthFailHandlerë¡œ ì¸ì¦ ì‹¤íŒ¨ ì²˜ë¦¬ (ì—ëŸ¬ ì‘ë‹µ, ë¡œê·¸ ê¸°ë¡ ë“±)

ğŸ›‘ ê¶Œí•œ ë° URL ì ‘ê·¼ ì œì–´
- /user/page â†’ ROLE_USER í•„ìš”
- /admin/* â†’ ROLE_ADMIN í•„ìš”
- /auth/*, /user/*, /main, / ë“±ì€ permitAll() ì²˜ë¦¬ë¡œ ë¹„ì¸ê°€ ì ‘ê·¼ í—ˆìš©
- ì •ì  ë¦¬ì†ŒìŠ¤ëŠ” WebSecurityCustomizer í†µí•´ ì¸ì¦ ì—†ì´ ì ‘ê·¼ ê°€ëŠ¥

ğŸ§¹ ë¡œê·¸ì•„ì›ƒ ë° ì„¸ì…˜ ê´€ë¦¬
- /auth/logout ê²½ë¡œë¡œ ë¡œê·¸ì•„ì›ƒ ì²˜ë¦¬
- ë¡œê·¸ì•„ì›ƒ ì‹œ JSESSIONID ì‚­ì œ ë° invalidateHttpSession(true) ì ìš©
- ì„¸ì…˜ ìµœëŒ€ í—ˆìš© ìˆ˜ 1ê°œ (maximumSessions(1)), ë§Œë£Œ ì‹œ /ë¡œ ë¦¬ë‹¤ì´ë ‰íŠ¸
- csrf().disable() ì„¤ì • ì£¼ì„ìœ¼ë¡œ ì´ìœ ë¥¼ ëª…ì‹œí•˜ë©´ ì¢‹ìŒ

---

## âœ¨ ì¶”ê°€ êµ¬í˜„ ì‚¬í•­ (ìš”êµ¬ì‚¬í•­ ì™¸ ê¸°ëŠ¥)

âœ‰ï¸ ì´ë©”ì¼ ì¸ì¦ ê¸°ë°˜ ë¹„ë°€ë²ˆí˜¸ ì¬ì„¤ì •
- ì¸ì¦ ìš”ì²­ â†’ ì´ë©”ì¼ ì „ì†¡ â†’ ì¸ì¦ ì½”ë“œ í™•ì¸ â†’ ì¬ì„¤ì • í˜ì´ì§€ ì ‘ê·¼ í—ˆìš©
- Redisë¥¼ í™œìš©í•œ ì¸ì¦ ì½”ë“œ ì„ì‹œ ì €ì¥ ë°©ì‹ ì–¸ê¸‰


